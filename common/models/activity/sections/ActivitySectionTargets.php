<?php

namespace common\models\activity\sections;

use common\models\activity\ActivityExtendedStatisticSections;
use common\models\activity\fields\ActivityExtendedStatisticFields;
use common\models\activity\fields\blocks\ActivityTargetBlock;
use common\models\activity\fields\blocks\BaseBlockModel;

/**
 * Created by PhpStorm.
 * User: kostet
 * Date: 03.09.2018
 * Time: 11:48
 *
 * @property mixed $model
 */

class ActivitySectionTargets extends BaseBlockModel {
    protected $_block_template = 'partials/blocks/targets/_targets';

    public function beforeSave($insert)
    {
        $this->header = is_null($this->header) ? 'Цели' : $this->header;

        return parent::beforeSave($insert); // TODO: Change the autogenerated stub
    }

    /**
     * @return mixed
     */
    public function getModel() {
        return new ActivityTargetBlock();
    }

    public function renderFields($view) {
        return [
            'html_container' => $this->_fields_container,
            'html' => $view->renderAjax('partials/blocks/targets/_targets_fields_list', [ 'fields' => $this->getFieldsList(), 'section' => $this ])
        ];
    }
}
